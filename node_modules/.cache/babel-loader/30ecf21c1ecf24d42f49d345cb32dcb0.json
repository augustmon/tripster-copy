{"ast":null,"code":"var _s = $RefreshSig$();\nimport Parse from \"parse\";\nimport { useNavigate } from \"react-router-dom\";\n\n// Log out user\nasync function handleLogOut() {\n  _s();\n  const navigate = useNavigate();\n  await Parse.User.logOut();\n  if (Parse.User.current() === null) {\n    alert(\"You are succesfully logged out\");\n    navigate(\"/\");\n  }\n}\n\n// Create a new User\n_s(handleLogOut, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\nexport async function createParseUser(bookingId, name, passwordConfirm) {\n  // check if bookingId exists!\n  try {\n    const id = await queryBookingId(bookingId);\n    if (id !== null) {\n      console.log(id + \" Booking key exist\");\n    }\n  } catch (error) {\n    alert(\"BOOKING KEY ERROR: \" + error.message);\n  }\n  const bookingObject = await queryBookingObject(bookingId);\n\n  // Creates a new Parse \"User\" object, which is created by default in your Parse app\n  let user = new Parse.User();\n  // Set the input values to the new \"User\" object\n  user.set(\"bookingId\", bookingObject);\n  user.set(\"username\", name);\n  user.set(\"password\", passwordConfirm);\n  try {\n    // Call the save method, which returns the saved object if successful\n    user = await user.save();\n    if (user !== null) {\n      // Notify the success by getting the attributes from the \"User\" object, by using the get method (the id attribute needs to be accessed directly, though)\n      alert(`New object created with success! ObjectId: ${user.id}, \n        ${user.get(\"username\")}, ${user.get(\"password\")}`);\n    }\n  } catch (error) {\n    alert(`User Signup Error: ${error.message}`);\n  }\n}\nasync function queryBookingId(bookingIdInput) {\n  let parseQuery = new Parse.Query(\"Booking\");\n  parseQuery.equalTo(\"key\", bookingIdInput);\n  let results = await parseQuery.find();\n  let returnKey = results[0].get(\"key\");\n  return returnKey;\n}\nasync function queryBookingObject(bookingIdInput) {\n  let parseQuery = new Parse.Query(\"Booking\");\n  parseQuery.equalTo(\"key\", bookingIdInput);\n  let results = await parseQuery.find();\n  let returnObject = results[0];\n  return returnObject;\n}\n\n// export async function doUserLogIn(username, password, bookingnumber) {\n//   console.log(\"LOGGING IN \");\n\n//   try {\n//     const loggedInUser = await Parse.User.logIn(\n//       username,\n//       password,\n//       bookingnumber\n//     );\n//     if ((bookingnumber, username, password !== null)) {\n//     alert(\n//       `Success! User ${loggedInUser.get(\"username\")} has successfully signed in!`\n//     )}\n//     else {\n//       console.log(\"ERROR\")\n//     }\n//   }\n// }\n\n//     const currentUser = await Parse.User.current();\n//     console.log(loggedInUser === currentUser);\n\n//     let user = doUserLogIn();\n//     user.set(\"bookingId\", bookingnumber);\n//     user.set(\"username\", username);\n//     user.set(\"password\", password);\n\n//     getCurrentUser();\n//     return true;\n//   } catch (error) {\n//     alert(`Your info was not correct! ${error.message}`);\n//     return false;\n//   }\n// }","map":{"version":3,"names":["Parse","useNavigate","handleLogOut","navigate","User","logOut","current","alert","createParseUser","bookingId","name","passwordConfirm","id","queryBookingId","console","log","error","message","bookingObject","queryBookingObject","user","set","save","get","bookingIdInput","parseQuery","Query","equalTo","results","find","returnKey","returnObject"],"sources":["/Users/august/Documents/ITU/TID/exam/tripster/src/api/user.js"],"sourcesContent":["import Parse from \"parse\";\nimport { useNavigate } from \"react-router-dom\";\n\n// Log out user\nasync function handleLogOut() {\n  const navigate = useNavigate();\n\n  await Parse.User.logOut();\n  if (Parse.User.current() === null) {\n    alert(\"You are succesfully logged out\");\n    navigate(\"/\");\n  }\n}\n\n// Create a new User\nexport async function createParseUser(bookingId, name, passwordConfirm) {\n  // check if bookingId exists!\n  try {\n    const id = await queryBookingId(bookingId);\n    if (id !== null) {\n      console.log(id + \" Booking key exist\");\n    }\n  } catch (error) {\n    alert(\"BOOKING KEY ERROR: \" + error.message);\n  }\n\n  const bookingObject = await queryBookingObject(bookingId);\n\n  // Creates a new Parse \"User\" object, which is created by default in your Parse app\n  let user = new Parse.User();\n  // Set the input values to the new \"User\" object\n  user.set(\"bookingId\", bookingObject);\n  user.set(\"username\", name);\n  user.set(\"password\", passwordConfirm);\n  try {\n    // Call the save method, which returns the saved object if successful\n    user = await user.save();\n    if (user !== null) {\n      // Notify the success by getting the attributes from the \"User\" object, by using the get method (the id attribute needs to be accessed directly, though)\n      alert(\n        `New object created with success! ObjectId: ${user.id}, \n        ${user.get(\"username\")}, ${user.get(\"password\")}`\n      );\n    }\n  } catch (error) {\n    alert(`User Signup Error: ${error.message}`);\n  }\n}\n\nasync function queryBookingId(bookingIdInput) {\n  let parseQuery = new Parse.Query(\"Booking\");\n  parseQuery.equalTo(\"key\", bookingIdInput);\n  let results = await parseQuery.find();\n\n  let returnKey = results[0].get(\"key\");\n  return returnKey;\n}\n\nasync function queryBookingObject(bookingIdInput) {\n  let parseQuery = new Parse.Query(\"Booking\");\n  parseQuery.equalTo(\"key\", bookingIdInput);\n  let results = await parseQuery.find();\n\n  let returnObject = results[0];\n  return returnObject;\n}\n\n// export async function doUserLogIn(username, password, bookingnumber) {\n//   console.log(\"LOGGING IN \");\n\n//   try {\n//     const loggedInUser = await Parse.User.logIn(\n//       username,\n//       password,\n//       bookingnumber\n//     );\n//     if ((bookingnumber, username, password !== null)) {\n//     alert(\n//       `Success! User ${loggedInUser.get(\"username\")} has successfully signed in!`\n//     )}\n//     else {\n//       console.log(\"ERROR\")\n//     }\n//   }\n// }\n\n//     const currentUser = await Parse.User.current();\n//     console.log(loggedInUser === currentUser);\n\n//     let user = doUserLogIn();\n//     user.set(\"bookingId\", bookingnumber);\n//     user.set(\"username\", username);\n//     user.set(\"password\", password);\n\n//     getCurrentUser();\n//     return true;\n//   } catch (error) {\n//     alert(`Your info was not correct! ${error.message}`);\n//     return false;\n//   }\n// }\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,kBAAkB;;AAE9C;AACA,eAAeC,YAAY,GAAG;EAAA;EAC5B,MAAMC,QAAQ,GAAGF,WAAW,EAAE;EAE9B,MAAMD,KAAK,CAACI,IAAI,CAACC,MAAM,EAAE;EACzB,IAAIL,KAAK,CAACI,IAAI,CAACE,OAAO,EAAE,KAAK,IAAI,EAAE;IACjCC,KAAK,CAAC,gCAAgC,CAAC;IACvCJ,QAAQ,CAAC,GAAG,CAAC;EACf;AACF;;AAEA;AAAA,GAVeD,YAAY;EAAA,QACRD,WAAW;AAAA;AAU9B,OAAO,eAAeO,eAAe,CAACC,SAAS,EAAEC,IAAI,EAAEC,eAAe,EAAE;EACtE;EACA,IAAI;IACF,MAAMC,EAAE,GAAG,MAAMC,cAAc,CAACJ,SAAS,CAAC;IAC1C,IAAIG,EAAE,KAAK,IAAI,EAAE;MACfE,OAAO,CAACC,GAAG,CAACH,EAAE,GAAG,oBAAoB,CAAC;IACxC;EACF,CAAC,CAAC,OAAOI,KAAK,EAAE;IACdT,KAAK,CAAC,qBAAqB,GAAGS,KAAK,CAACC,OAAO,CAAC;EAC9C;EAEA,MAAMC,aAAa,GAAG,MAAMC,kBAAkB,CAACV,SAAS,CAAC;;EAEzD;EACA,IAAIW,IAAI,GAAG,IAAIpB,KAAK,CAACI,IAAI,EAAE;EAC3B;EACAgB,IAAI,CAACC,GAAG,CAAC,WAAW,EAAEH,aAAa,CAAC;EACpCE,IAAI,CAACC,GAAG,CAAC,UAAU,EAAEX,IAAI,CAAC;EAC1BU,IAAI,CAACC,GAAG,CAAC,UAAU,EAAEV,eAAe,CAAC;EACrC,IAAI;IACF;IACAS,IAAI,GAAG,MAAMA,IAAI,CAACE,IAAI,EAAE;IACxB,IAAIF,IAAI,KAAK,IAAI,EAAE;MACjB;MACAb,KAAK,CACF,8CAA6Ca,IAAI,CAACR,EAAG;AAC9D,UAAUQ,IAAI,CAACG,GAAG,CAAC,UAAU,CAAE,KAAIH,IAAI,CAACG,GAAG,CAAC,UAAU,CAAE,EAAC,CAClD;IACH;EACF,CAAC,CAAC,OAAOP,KAAK,EAAE;IACdT,KAAK,CAAE,sBAAqBS,KAAK,CAACC,OAAQ,EAAC,CAAC;EAC9C;AACF;AAEA,eAAeJ,cAAc,CAACW,cAAc,EAAE;EAC5C,IAAIC,UAAU,GAAG,IAAIzB,KAAK,CAAC0B,KAAK,CAAC,SAAS,CAAC;EAC3CD,UAAU,CAACE,OAAO,CAAC,KAAK,EAAEH,cAAc,CAAC;EACzC,IAAII,OAAO,GAAG,MAAMH,UAAU,CAACI,IAAI,EAAE;EAErC,IAAIC,SAAS,GAAGF,OAAO,CAAC,CAAC,CAAC,CAACL,GAAG,CAAC,KAAK,CAAC;EACrC,OAAOO,SAAS;AAClB;AAEA,eAAeX,kBAAkB,CAACK,cAAc,EAAE;EAChD,IAAIC,UAAU,GAAG,IAAIzB,KAAK,CAAC0B,KAAK,CAAC,SAAS,CAAC;EAC3CD,UAAU,CAACE,OAAO,CAAC,KAAK,EAAEH,cAAc,CAAC;EACzC,IAAII,OAAO,GAAG,MAAMH,UAAU,CAACI,IAAI,EAAE;EAErC,IAAIE,YAAY,GAAGH,OAAO,CAAC,CAAC,CAAC;EAC7B,OAAOG,YAAY;AACrB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module"}